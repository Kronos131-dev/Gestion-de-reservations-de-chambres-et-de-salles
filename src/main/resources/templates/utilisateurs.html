<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="fr">
<head>
    <meta charset="UTF-8">
    <title th:text="${pageTitle}">Gestion des utilisateurs</title>

    <link rel="stylesheet" href="/css/utilisateurs.css">

    <script src="/js/utilisateurs.js" defer></script>
</head>

<h1 th:text="${pageTitle}"></h1>

<button onclick="showCreateForm()">Créer un utilisateur</button>

<table id="utilisateurs-table" border="1" style="width:100%; margin-top:20px;">
    <thead>
    <tr>
        <th>ID</th><th>Nom</th><th>Prénom</th><th>Email</th><th>Téléphone</th><th>Naissance</th><th>Role</th><th>Num</th><th>Rue</th><th>Ville</th><th>Code Postal</th><th>Pays</th><th>Actions</th>
    </tr>
    </thead>
    <tbody></tbody>
</table>

<div id="edit-section" style="display:none; margin-top:30px; border:1px solid #ccc; padding:10px;">
    <h3>Modifier un utilisateur</h3>
    <input type="hidden" id="edit-id">

    <div>
        <label>Nom:</label>
        <input type="text" id="edit-nom">
    </div>
    <div>
        <label>Prénom:</label>
        <input type="text" id="edit-prenom">
    </div>
    <div>
        <label>Email:</label>
        <input type="email" id="edit-email">
    </div>
    <div>
        <label>Téléphone:</label>
        <input type="text" id="edit-tel">
    </div>
    <div>
        <label>Mot de passe:</label>
        <input type="password" id="edit-password">
    </div>
    <div>
        <label>Date de naissance:</label>
        <input type="date" id="edit-dateNaissance">
    </div>
    <div>
        <label>Rôle :</label>
        <select id="edit-role"></select>
    </div>
    <div>
        <label>Adresse existante :</label>
        <select id="edit-adresse"></select>
        <button type="button" onclick="toggleNewAddress('edit')">Nouvelle adresse</button>
    </div>
    <div id="edit-new-address" style="display:none; margin-top:10px;">
        <h4>Nouvelle adresse</h4>
        <input type="text" id="edit-num" placeholder="Numéro"><br>
        <input type="text" id="edit-rue" placeholder="Rue"><br>
        <input type="text" id="edit-ville" placeholder="Ville"><br>
        <input type="text" id="edit-codePostal" placeholder="Code Postal"><br>
        <input type="text" id="edit-pays" placeholder="Pays"><br>
    </div>

    <button onclick="updateUtilisateur()">Enregistrer</button>
    <button onclick="document.querySelector('#edit-section').style.display='none'">Annuler</button>
</div>

<div id="create-section" style="display:none; margin-top:30px; border:1px solid #ccc; padding:10px;">
    <h3>Créer un nouvel utilisateur</h3>
    <div>
        <label>Nom:</label>
        <input type="text" id="create-nom">
    </div>
    <div>
        <label>Prénom:</label>
        <input type="text" id="create-prenom">
    </div>
    <div>
        <label>Email:</label>
        <input type="email" id="create-email">
    </div>
    <div>
        <label>Téléphone:</label>
        <input type="text" id="create-tel">
    </div>
    <div>
        <label>Mot de passe:</label>
        <input type="password" id="create-password">
    </div>
    <div>
        <label>Date de naissance:</label>
        <input type="date" id="create-dateNaissance">
    </div>
    <div>
        <label>Rôle :</label>
        <select id="create-role"></select>
    </div>
    <div>
        <label>Adresse existante :</label>
        <select id="create-adresse"></select>
        <button type="button" onclick="toggleNewAddress('create')">Nouvelle adresse</button>
    </div>
    <div id="create-new-address" style="display:none; margin-top:10px;">
        <h4>Nouvelle adresse</h4>
        <input type="text" id="create-num" placeholder="Numéro"><br>
        <input type="text" id="create-rue" placeholder="Rue"><br>
        <input type="text" id="create-ville" placeholder="Ville"><br>
        <input type="text" id="create-codePostal" placeholder="Code Postal"><br>
        <input type="text" id="create-pays" placeholder="Pays"><br>
    </div>

    <button onclick="createUtilisateur()">Créer</button>
    <button onclick="document.querySelector('#create-section').style.display='none'">Annuler</button>
</div>

</body>
</html>